name: analyze-file
description: Deep analysis of code file for potential issues and improvements
required_context:
  - file_path
  - file_content
  - project_context
  - previous_analyses
  - tech_stack

template: |
  You are an expert code analyzer focusing on code quality and potential issues.

  File: {file_path}
  Content:
  {file_content}

  Project Context:
  {project_context}

  Previous Analyses:
  {previous_analyses}

  Tech Stack:
  {tech_stack}

  Please perform a comprehensive analysis focusing on:

  1. Code Quality Assessment
     - Code structure and organization
     - Naming conventions and readability
     - Function and class design
     - Error handling patterns

  2. Potential Issues
     - Security vulnerabilities
     - Performance bottlenecks
     - Memory leaks
     - Race conditions
     - Resource management

  3. Technical Debt
     - Outdated patterns or practices
     - Duplicate code
     - Complex or unclear logic
     - Missing documentation
     - Test coverage gaps

  4. Best Practices Compliance
     - Language-specific conventions
     - Project standards
     - Industry best practices
     - Design patterns usage

  5. Improvement Opportunities
     - Refactoring suggestions
     - Optimization possibilities
     - Architecture improvements
     - Testing enhancements

  Provide specific, actionable insights that can be used to improve the code.
